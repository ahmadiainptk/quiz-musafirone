<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Matematika Genza</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- KaTeX CSS & JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f3f4f6;
        }

        .math-tex {
            font-size: 1.1em;
        }

        /* SVG Container untuk Responsivitas */
        .svg-container {
            width: 100%;
            max-width: 300px;
            margin: 1rem auto;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 10px;
            background: white;
            display: flex;
            justify-content: center;
        }

        /* Transisi halus */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .option-label {
            cursor: pointer;
            transition: all 0.2s;
        }
        .option-input:checked + .option-content {
            background-color: #dbeafe; /* blue-100 */
            border-color: #3b82f6; /* blue-500 */
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Navbar -->
    <nav class="bg-blue-600 text-white p-4 shadow-md sticky top-0 z-50">
        <div class="max-w-3xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold">Genza Math Quiz</h1>
            <div id="timer-display" class="hidden bg-red-500 px-3 py-1 rounded-full font-mono font-bold text-sm">
                00:00
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="max-w-3xl mx-auto p-4 min-h-screen">
        
        <!-- Halaman Beranda (Pilih Paket) -->
        <div id="home-screen" class="fade-in">
            <div class="text-center mb-8 mt-4">
                <h2 class="text-2xl font-bold mb-2">Selamat Datang!</h2>
                <p class="text-gray-600">Silakan pilih paket soal sesuai jenjang kelas Anda.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Paket A -->
                <button onclick="startQuiz('A')" class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md border-l-4 border-green-500 hover:bg-green-50 transition text-left group">
                    <h3 class="font-bold text-lg group-hover:text-green-700">Paket A (Easy)</h3>
                    <p class="text-sm text-gray-500 mt-1">20 Soal • Pecahan, Bangun Ruang, Data</p>
                    <span class="inline-block mt-3 text-xs bg-gray-100 px-2 py-1 rounded text-gray-600">Waktu: 60 Menit</span>
                </button>

                <!-- Paket B -->
                <button onclick="startQuiz('B')" class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md border-l-4 border-blue-500 hover:bg-blue-50 transition text-left group">
                    <h3 class="font-bold text-lg group-hover:text-blue-700">Paket B (Medium)</h3>
                    <p class="text-sm text-gray-500 mt-1">20 Soal • Bilangan Bulat, Aljabar Dasar</p>
                    <span class="inline-block mt-3 text-xs bg-gray-100 px-2 py-1 rounded text-gray-600">Waktu: 60 Menit</span>
                </button>

                <!-- Paket C -->
                <button onclick="startQuiz('C')" class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md border-l-4 border-purple-500 hover:bg-purple-50 transition text-left group">
                    <h3 class="font-bold text-lg group-hover:text-purple-700">Paket C (Hard)</h3>
                    <p class="text-sm text-gray-500 mt-1">20 Soal • Pola Bilangan, Pythagoras</p>
                    <span class="inline-block mt-3 text-xs bg-gray-100 px-2 py-1 rounded text-gray-600">Waktu: 60 Menit</span>
                </button>

                <!-- Paket D -->
                <button onclick="startQuiz('D')" class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md border-l-4 border-red-500 hover:bg-red-50 transition text-left group">
                    <h3 class="font-bold text-lg group-hover:text-red-700">Paket D (Super Hard)</h3>
                    <p class="text-sm text-gray-500 mt-1">20 Soal • Pangkat, Akar, Bangun Sisi Lengkung</p>
                    <span class="inline-block mt-3 text-xs bg-gray-100 px-2 py-1 rounded text-gray-600">Waktu: 90 Menit</span>
                </button>
            </div>
        </div>

        <!-- Halaman Kuis -->
        <div id="quiz-screen" class="hidden fade-in">
            <div id="quiz-header" class="mb-4 flex justify-between items-end border-b pb-2">
                <span id="package-title" class="font-bold text-gray-700 text-lg"></span>
                <span id="progress-text" class="text-sm text-gray-500"></span>
            </div>

            <form id="quiz-form">
                <div id="questions-container" class="space-y-8">
                    <!-- Soal akan di-inject di sini oleh JavaScript -->
                </div>

                <div class="mt-8 text-center pb-12">
                    <button type="button" onclick="submitQuiz()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105">
                        Kirim Jawaban
                    </button>
                </div>
            </form>
        </div>

        <!-- Halaman Hasil -->
        <div id="result-screen" class="hidden fade-in">
            <div class="bg-white rounded-xl shadow-lg p-6 text-center mb-6">
                <h2 class="text-2xl font-bold mb-2">Hasil Kuis</h2>
                <div class="text-5xl font-extrabold text-blue-600 my-4" id="final-score">0</div>
                <p class="text-gray-600 mb-4">Nilai Akhir Anda</p>
                
                <div class="flex justify-center gap-4">
                    <button onclick="resetApp()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded transition">
                        Pilih Paket Lain
                    </button>
                    <button onclick="retryQuiz()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition">
                        Coba Lagi
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow p-6">
                <h3 class="font-bold text-lg mb-4 border-b pb-2">Pembahasan Soal</h3>
                <div id="discussion-container" class="space-y-6">
                    <!-- Pembahasan di-inject di sini -->
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- DATA SOAL ---
        const quizData = {
            "A": {
        title: "Paket A (Easy)",
        time: 30, // menit
        questions: [
            {
                id: 1,
                q: "Hitunglah hasil dari operasi pecahan berikut: $(1\\frac{1}{3}+1\\frac{1}{8})-(2\\frac{2}{3}-1\\frac{1}{4})$",
                options: ["$2\\frac{1}{3}$", "$1\\frac{1}{24}$", "$2\\frac{5}{25}$", "$1\\frac{11}{24}$"],
                correct: 1, // B
                explanation: "Samakan penyebut menjadi 24. <br> Kelompok 1: $1\\frac{8}{24} + 1\\frac{3}{24} = 2\\frac{11}{24}$. <br> Kelompok 2: $2\\frac{16}{24} - 1\\frac{6}{24} = 1\\frac{10}{24}$. <br> Hasil: $2\\frac{11}{24} - 1\\frac{10}{24} = 1\\frac{1}{24}$"
            },
            {
                id: 2,
                q: "Pak Ahmad mempunyai 120 kg gula yang akan dibagikan kepada anak yatim dengan berat masing-masing $1\\frac{3}{5}$ kg. Berapa banyak anak yatim yang menerima gula tersebut?",
                options: ["50 orang", "60 orang", "72 orang", "75 orang"],
                correct: 3, // D
                explanation: "Ubah pecahan campuran ke biasa: $1\\frac{3}{5} = \\frac{8}{5}$. <br> Jumlah anak = $120 : \\frac{8}{5} = 120 \\times \\frac{5}{8} = 15 \\times 5 = 75$ orang."
            },
            {
                id: 3,
                q: "Sawah Pak Mamat seluas $10.000 m^2$ ditanami padi dan jagung. Jika $\\frac{3}{4}$ bagian ditanami padi, maka luas sawah yang ditanami jagung adalah...",
                options: ["$7.500 m^2$", "$5.000 m^2$", "$2.500 m^2$", "$2.000 m^2$"],
                correct: 2, // C
                explanation: "Bagian jagung = $1 - \\frac{3}{4} = \\frac{1}{4}$. <br> Luas jagung = $\\frac{1}{4} \\times 10.000 = 2.500 m^2$."
            },
            {
                id: 4,
                q: "Hasil perkalian $2,57 \\times 2,4$ adalah...",
                options: ["6,168", "61,68", "616,8", "6.168"],
                correct: 0, // A
                explanation: "$257 \\times 24 = 6168$. Total ada 3 angka di belakang koma (2 dari 2,57 dan 1 dari 2,4). Jadi hasilnya 6,168."
            },
            {
                id: 5,
                q: "Apabila $25 \\times 18 \\times 4 : (-6) = n$, maka nilai $n$ sama dengan...",
                options: ["-300", "300", "-330", "330"],
                correct: 0, // A
                explanation: "$25 \\times 18 \\times 4 = 1.800$. <br> $1.800 : (-6) = -300$."
            },
            {
                id: 6,
                q: "Hasil dari $241 + 25 - (-37) - 204$ adalah...",
                options: ["99", "25", "79", "98"],
                correct: 0, // A
                explanation: "$241 + 25 + 37 - 204 = 303 - 204 = 99$."
            },
            {
                id: 7,
                q: "Hasil dari $1.325 - 125 : 5 \\times 16$ adalah...",
                options: ["3.840", "3.250", "925", "725"],
                correct: 2, // C
                explanation: "Kerjakan pembagian dan perkalian dulu: <br> $125 : 5 = 25$, lalu $25 \\times 16 = 400$. <br> $1.325 - 400 = 925$."
            },
            {
                id: 8,
                q: "Sebuah daging beku suhunya $-4^\\circ C$. Daging tersebut dimasak hingga suhunya $80^\\circ C$. Saat dihidangkan suhunya turun $22^\\circ C$. Tentukan suhunya sekarang?",
                options: ["$54^\\circ C$", "$41^\\circ C$", "$44^\\circ C$", "$58^\\circ C$"],
                correct: 3, // D
                explanation: "Suhu setelah dimasak $80^\\circ C$, kemudian turun $22^\\circ C$. <br> $80 - 22 = 58^\\circ C$."
            },
            {
                id: 9,
                q: "Volume sebuah kubus adalah $27.000 cm^3$. Panjang rusuk kubus tersebut adalah...",
                options: ["10 cm", "20 cm", "30 cm", "40 cm"],
                correct: 2, // C
                explanation: "Panjang rusuk = $\\sqrt[3]{Volume}$. <br> $r = \\sqrt[3]{27.000} = 30$ cm."
            },
            {
                id: 10,
                q: "Kolam renang berukuran panjang 8,5 m, lebar 5 m, dan kedalaman 2 m. Berapa volume air jika kolam diisi penuh?",
                options: ["$65 m^3$", "$75 m^3$", "$85 m^3$", "$95 m^3$"],
                correct: 2, // C
                explanation: "Volume balok = $p \\times l \\times t$. <br> $8,5 \\times 5 \\times 2 = 8,5 \\times 10 = 85 m^3$."
            },
            {
                id: 11,
                q: "Diketahui nilai ulangan 6 siswa: 78, 66, 81, 72, 73, 68. Berapakah rata-rata (mean) nilai tersebut?",
                options: ["78", "81", "68", "73"],
                correct: 3, // D
                explanation: "Jumlah data = $78+66+81+72+73+68 = 438$. <br> Banyak data = 6. <br> Mean = $438 : 6 = 73$."
            },
            {
                id: 12,
                q: "Urutkan pecahan berikut dari yang terkecil: $\\frac{2}{5}$; 83%; 2,45; $2\\frac{1}{4}$",
                options: ["$\\frac{2}{5}$; 83%; 2,45; $2\\frac{1}{4}$", "83%; 2,45; $2\\frac{1}{4}$; $\\frac{2}{5}$", "$\\frac{2}{5}$; 83%; $2\\frac{1}{4}$; 2,45", "2,45; $2\\frac{1}{4}$; 83%; $\\frac{2}{5}$"],
                correct: 2, // C
                explanation: "Ubah ke desimal: $\\frac{2}{5}=0,40$; $83\\%=0,83$; $2\\frac{1}{4}=2,25$; $2,45=2,45$. <br> Urutan: 0,40 < 0,83 < 2,25 < 2,45."
            },
            {
                id: 13,
                q: "Tentukan median dari data berikut:<br>Nilai 4 (4 orang), Nilai 5 (6 orang), Nilai 6 (6 orang), Nilai 7 (8 orang), Nilai 8 (7 orang), Nilai 9 (2 orang).",
                options: ["5", "6", "6,5", "7"],
                correct: 3, // D
                explanation: "Total frekuensi = $4+6+6+8+7+2 = 33$. <br> Median ada di data ke-17. <br> Urutan data: 1-4(nilai 4), 5-10(nilai 5), 11-16(nilai 6), 17-24(nilai 7). <br> Jadi data ke-17 adalah 7."
            },
            {
                id: 14,
                q: "Doni mengukur keliling bola dan mendapatkan hasil 132 cm. Diameter bola tersebut adalah... ($\\pi = \\frac{22}{7}$)",
                options: ["14 cm", "25 cm", "42 cm", "50 cm"],
                correct: 2, // C
                explanation: "$K = \\pi \\times d \\rightarrow 132 = \\frac{22}{7} \\times d$. <br> $d = 132 \\times \\frac{7}{22} = 6 \\times 7 = 42$ cm."
            },
            {
                id: 15,
                q: "Luas sebuah lingkaran adalah $2.464 cm^2$. Keliling lingkaran tersebut adalah...",
                options: ["168 cm", "174 cm", "176 cm", "182 cm"],
                correct: 2, // C
                explanation: "$L = \\pi r^2 \\rightarrow 2464 = \\frac{22}{7} r^2 \\rightarrow r^2 = 784 \\rightarrow r = 28$. <br> $K = 2 \\pi r = 2 \\times \\frac{22}{7} \\times 28 = 176$ cm."
            },
            {
                id: 16,
                q: "Hasil perhitungan dari $\\sqrt{576} + 765 : 15$ adalah...",
                options: ["75", "82", "95", "60"],
                correct: 0, // A
                explanation: "$\\sqrt{576} = 24$. <br> $765 : 15 = 51$. <br> $24 + 51 = 75$."
            },
            {
                id: 17,
                q: "Perbandingan uang Budi dan Deni adalah 4:7. Jika jumlah total uang mereka adalah Rp 132.000,00, berapakah uang Budi?",
                options: ["Rp 84.000,00", "Rp 48.000,00", "Rp 68.000,00", "Rp 86.000,00"],
                correct: 1, // B
                explanation: "Total bagian = $4+7=11$. <br> Uang Budi = $\\frac{4}{11} \\times 132.000 = 4 \\times 12.000 = 48.000$."
            },
            {
                id: 18,
                q: "Hasil dari $0,875 : 0,25 + 0,44 : 2,75$ adalah...",
                options: ["3,42", "3,58", "3,60", "3,66"],
                correct: 3, // D
                explanation: "$0,875 : 0,25 = 3,5$. <br> $0,44 : 2,75 = 0,16$. <br> $3,5 + 0,16 = 3,66$."
            },
            {
                id: 19,
                q: "Nilai $a$ yang memenuhi persamaan $a + (-4) + 5 = -6$ adalah...",
                options: ["7", "6", "-7", "-6"],
                correct: 2, // C
                explanation: "$a - 4 + 5 = -6 \\rightarrow a + 1 = -6 \\rightarrow a = -7$."
            },
            {
                id: 20,
                q: "Rata-rata nilai 30 siswa adalah 7,4. Setelah nilai 2 siswa susulan digabungkan, rata-rata menjadi 7,5. Berapakah rata-rata nilai kedua siswa susulan tersebut?",
                options: ["7,6", "8", "9", "9,2"],
                correct: 2, // C
                explanation: "Total awal = $30 \\times 7,4 = 222$. <br> Total baru = $32 \\times 7,5 = 240$. <br> Selisih = $240 - 222 = 18$. <br> Rata-rata 2 siswa = $18 : 2 = 9$."
            }
        ]
    },
            "B": {
        title: "Paket B (Medium)",
        time: 45, // menit
        questions: [
            {
                id: 1,
                q: "Diketahui nilai $a=-2$, $b=4$, $c=-3$, dan $d=7$. Tentukan nilai dari $ab + bc + cd$.",
                options: ["-25", "-41", "25", "41"],
                correct: 1, // B
                explanation: "Substitusi nilai: <br> $ab = -2 \\times 4 = -8$ <br> $bc = 4 \\times -3 = -12$ <br> $cd = -3 \\times 7 = -21$ <br> Total: $-8 + (-12) + (-21) = -20 - 21 = -41$."
            },
            {
                id: 2,
                q: "Hitunglah hasil dari operasi bilangan bulat berikut: $10 + (-5) + (-18) + 20$.",
                options: ["7", "5", "-7", "-6"],
                correct: 0, // A
                explanation: "$10 - 5 - 18 + 20 = 5 - 18 + 20 = -13 + 20 = 7$."
            },
            {
                id: 3,
                q: "Jika $-5 < x \\le 3$ dan $x$ adalah anggota bilangan bulat, maka himpunan penyelesaian dari $x$ adalah...",
                options: ["{-5, -4, -3, -2, -1, 0, 1, 2}", "{-4, -3, -2, -1, 0, 1, 2}", "{-5, -4, -3, -2, -1, 0, 1, 2, 3}", "{-4, -3, -2, -1, 0, 1, 2, 3}"],
                correct: 3, // D
                explanation: "Tanda $<$ berarti -5 tidak termasuk (dimulai dari -4). <br> Tanda $\\le$ berarti 3 termasuk. <br> Jadi himpunannya: $\\{-4, -3, -2, -1, 0, 1, 2, 3\\}$."
            },
            {
                id: 4,
                q: "Hasil dari operasi campuran $10 + (-5 \\times 4) - 15 : (-5)$ adalah...",
                options: ["-6", "-7", "6", "7"],
                correct: 1, // B
                explanation: "Perkalian dan pembagian didahulukan: <br> $(-5 \\times 4) = -20$ <br> $15 : (-5) = -3$ <br> Persamaan menjadi: $10 + (-20) - (-3) = -10 + 3 = -7$."
            },
            {
                id: 5,
                q: "Jika $a=-3$, $b=2$, dan $c=-5$, hitunglah nilai dari $(3a-2b+c)-(a+2b-3c)$.",
                options: ["-34", "36", "-30", "34"],
                correct: 0, // A
                explanation: "Kelompok 1: $3(-3)-2(2)+(-5) = -9-4-5 = -18$. <br> Kelompok 2: $(-3)+2(2)-3(-5) = -3+4+15 = 16$. <br> Hasil: $-18 - 16 = -34$."
            },
            {
                id: 6,
                q: "Perhatikan operasi hitung berikut:<br>(i) $-5+(-3)=8$<br>(ii) $7+(-9)=2$<br>(iii) $-3-7=-10$<br>(iv) $-2+(-2)=-4$<br>Pernyataan yang benar adalah...",
                options: ["(i), (ii), dan (iii)", "(i), (ii), dan (iv)", "(ii) dan (iii)", "(iii) dan (iv)"],
                correct: 3, // D
                explanation: "(i) Salah, hasilnya harus -8. <br> (ii) Salah, hasilnya harus -2. <br> (iii) Benar. <br> (iv) Benar."
            },
            {
                id: 7,
                q: "Bentuk pecahan paling sederhana dari bilangan desimal $0,875$ adalah...",
                options: ["$\\frac{5}{6}$", "$\\frac{7}{8}$", "$\\frac{3}{4}$", "$\\frac{4}{5}$"],
                correct: 1, // B
                explanation: "$0,875 = \\frac{875}{1000}$. Pembilang dan penyebut dibagi 125. <br> $\\frac{875:125}{1000:125} = \\frac{7}{8}$."
            },
            {
                id: 8,
                q: "Luas sebuah persegi panjang adalah $1\\frac{4}{5} cm^2$. Jika lebarnya $1\\frac{1}{5} cm$, berapakah panjang persegi panjang tersebut?",
                options: ["$1\\frac{5}{6}$ cm", "$1\\frac{3}{4}$ cm", "$1\\frac{2}{3}$ cm", "$1\\frac{1}{2}$ cm"],
                correct: 3, // D
                explanation: "Luas = $\\frac{9}{5}$, Lebar = $\\frac{6}{5}$. <br> Panjang = Luas : Lebar = $\\frac{9}{5} : \\frac{6}{5} = \\frac{9}{5} \\times \\frac{5}{6} = \\frac{45}{30} = 1\\frac{15}{30} = 1\\frac{1}{2}$ cm."
            },
            {
                id: 9,
                q: "Hasil perkalian dari $1,52 \\times 7,6$ adalah...",
                options: ["11,552", "1,1552", "115,52", "1155,2"],
                correct: 0, // A
                explanation: "$152 \\times 76 = 11552$. <br> Total angka di belakang koma ada 3 (2 dari 1,52 dan 1 dari 7,6). <br> Jadi hasilnya 11,552."
            },
            {
                id: 10,
                q: "Sebuah pita panjangnya $5\\frac{5}{8}$ m dibagi menjadi tiga bagian yang sama panjang. Berapakah panjang setiap bagian?",
                options: ["$1\\frac{7}{8}$ m", "$1\\frac{7}{9}$ m", "$1\\frac{5}{8}$ m", "$1\\frac{5}{9}$ m"],
                correct: 0, // A
                explanation: "$5\\frac{5}{8} = \\frac{45}{8}$. <br> $\\frac{45}{8} : 3 = \\frac{45}{8} \\times \\frac{1}{3} = \\frac{15}{8} = 1\\frac{7}{8}$ m."
            },
            {
                id: 11,
                q: "Bentuk desimal dari pecahan $\\frac{17}{40}$ adalah...",
                options: ["0,475", "0,425", "0,375", "0,0425"],
                correct: 1, // B
                explanation: "$17 : 40 = 0,425$."
            },
            {
                id: 12,
                q: "Diketahui 25 orang pekerja dapat menyelesaikan pekerjaan dalam 6 hari. Jika hanya ada 15 pekerja, berapa lama pekerjaan tersebut selesai?",
                options: ["8 hari", "9 hari", "10 hari", "11 hari"],
                correct: 2, // C
                explanation: "Perbandingan berbalik nilai. <br> $25 \\times 6 = 15 \\times n$ <br> $150 = 15n \\rightarrow n = 10$ hari."
            },
            {
                id: 13,
                q: "Uang Rita Rp 8.000,00, sedangkan uang Lisa Rp 4.000,00 lebih banyak dari uang Rita. Perbandingan uang Rita dan uang Lisa adalah...",
                options: ["2 : 1", "2 : 3", "3 : 4", "4 : 5"],
                correct: 1, // B
                explanation: "Uang Lisa = $8.000 + 4.000 = 12.000$. <br> Perbandingan Rita : Lisa = $8.000 : 12.000$. <br> Disederhanakan (bagi 4.000) menjadi $2 : 3$."
            },
            {
                id: 14,
                q: "Sebuah kaleng berbentuk tabung memiliki jari-jari 14 cm dan tinggi 10 cm. Hitunglah luas permukaan kaleng tersebut!",
                svg: `
                <svg viewBox="0 0 100 120" class="w-24 h-32 stroke-current text-blue-600" fill="none" stroke-width="2">
                    <ellipse cx="50" cy="15" rx="40" ry="10" />
                    <line x1="10" y1="15" x2="10" y2="105" />
                    <line x1="90" y1="15" x2="90" y2="105" />
                    <path d="M10 105 a40 10 0 0 0 80 0" />
                    <path d="M10 105 a40 10 0 0 1 80 0" stroke-dasharray="4" opacity="0.5"/>
                    <text x="50" y="60" text-anchor="middle" font-size="10" stroke="none" fill="black">t=10</text>
                    <text x="50" y="15" text-anchor="middle" font-size="10" stroke="none" fill="black">r=14</text>
                </svg>`,
                options: ["2.112 cm²", "2.212 cm²", "3.112 cm²", "3.212 cm²"],
                correct: 0, // A
                explanation: "$LP = 2\\pi r(r+t)$. <br> $2 \\times \\frac{22}{7} \\times 14 \\times (14+10)$ <br> $= 2 \\times 44 \\times 24 = 88 \\times 24 = 2.112$ cm²."
            },
            {
                id: 15,
                q: "Volume kubus yang memiliki panjang rusuk 16 cm adalah...",
                options: ["3.068", "3.568", "4.156", "4.096"],
                correct: 3, // D
                explanation: "$V = s \\times s \\times s = 16 \\times 16 \\times 16 = 4.096$."
            },
            {
                id: 16,
                q: "Satu kodi kain (20 lembar) harganya Rp 190.000,00. Berapakah harga 17 lembar kain yang sama?",
                options: ["Rp 165.500,00", "Rp 160.500,00", "Rp 161.500,00", "Rp 163.500,00"],
                correct: 2, // C
                explanation: "Harga per lembar = $190.000 : 20 = 9.500$. <br> Harga 17 lembar = $17 \\times 9.500 = 161.500$."
            },
            {
                id: 17,
                q: "Nilai $n$ yang memenuhi persamaan $3n : (-4) = -9$ adalah...",
                options: ["12", "-12", "8", "10"],
                correct: 0, // A
                explanation: "$3n = -9 \\times (-4)$ <br> $3n = 36 \\rightarrow n = 12$."
            },
            {
                id: 18,
                q: "Jika $4^5 : 4^n = 16$, maka nilai dari $(n+1)^2$ adalah...",
                options: ["18", "16", "15", "14"],
                correct: 1, // B
                explanation: "$4^5 : 4^n = 4^2$. <br> Pangkat: $5 - n = 2 \\rightarrow n = 3$. <br> Nilai $(n+1)^2 = (3+1)^2 = 4^2 = 16$."
            },
            {
                id: 19,
                q: "Hasil dari $(12:4) - (3 \\times -4)$ adalah...",
                options: ["-15", "15", "-14", "14"],
                correct: 1, // B
                explanation: "$3 - (-12) = 3 + 12 = 15$."
            },
            {
                id: 20,
                q: "Salah satu bilangan rasional yang terletak di antara pecahan $\\frac{3}{2}$ dan $\\frac{9}{5}$ adalah...",
                options: ["$\\frac{18}{10}$", "$\\frac{20}{10}$", "$\\frac{19}{10}$", "$\\frac{17}{10}$"],
                correct: 3, // D
                explanation: "Ubah ke desimal: $\\frac{3}{2}=1,5$ dan $\\frac{9}{5}=1,8$. <br> Pilihan D: $\\frac{17}{10} = 1,7$. <br> 1,7 terletak di antara 1,5 dan 1,8."
            }
        ]
    },
            "C": {
        title: "Paket C (Hard)",
        time: 60, // menit
        questions: [
            {
                id: 1,
                q: "Suku-suku sejenis dari bentuk aljabar $7x^2 + 5xy - 4y^2 - 6x^2 + 2xy + 2y^2$ adalah...",
                options: ["$7x^2$ dan $5xy$", "$5xy$ dan $2xy$", "$-4y^2$ dan $2xy$", "$7x^2$ dan $-4y^2$"],
                correct: 1, // B
                explanation: "Suku sejenis adalah suku yang memiliki variabel dan pangkat yang sama. <br> Di sini, $5xy$ dan $2xy$ memiliki variabel yang sama yaitu $xy$."
            },
            {
                id: 2,
                q: "Bentuk sederhana dari $9y^2 - 4xy + 5y + 7y^2 + 3xy$ adalah...",
                options: ["$16y^2 - xy + 5y$", "$5y^2 + 4xy + 8y$", "$16y^2 - 7xy + 5y$", "$9y^2 - 7xy + 5y$"],
                correct: 0, // A
                explanation: "Jumlahkan suku sejenis: <br> $9y^2 + 7y^2 = 16y^2$ <br> $-4xy + 3xy = -xy$ <br> Suku $5y$ tetap."
            },
            {
                id: 3,
                q: "Pemfaktoran bentuk $x^2 + 2x - 48$ adalah...",
                options: ["$(x-8)(x-6)$", "$(x-4)(x-6)$", "$(x+8)(x-6)$", "$(x+24)(x-2)$"],
                correct: 2, // C
                explanation: "Cari bilangan yang jika dikali hasilnya -48 dan dijumlah hasilnya 2. <br> Bilangan tersebut adalah 8 dan -6. <br> Maka faktornya $(x+8)(x-6)$."
            },
            {
                id: 4,
                q: "Hasil dari $-3x(-4y + 5z)$ adalah...",
                options: ["$12xy - 15xz$", "$-12xy - 15xz$", "$12xy + 15xz$", "$-12xy - 5xz$"],
                correct: 0, // A
                explanation: "Distributif: <br> $(-3x)(-4y) = 12xy$ <br> $(-3x)(5z) = -15xz$."
            },
            {
                id: 5,
                q: "Hasil dari $(4x-3)^2$ adalah...",
                options: ["$8x^2 + 9$", "$16x^2 - 24$", "$8x^2 + 12x + 9$", "$16x^2 - 24x + 9$"],
                correct: 3, // D
                explanation: "Rumus $(a-b)^2 = a^2 - 2ab + b^2$. <br> $(4x)^2 - 2(4x)(3) + 3^2 = 16x^2 - 24x + 9$."
            },
            {
                id: 6,
                q: "Perhatikan gambar garis lurus. Jika besar sudut pertama $(7x+5)^\\circ$ dan pelurusnya $(-2x+25)^\\circ$ (Asumsi: Soal asli sudut berdampingan saling berpelurus), tentukan nilai $3x+30$.",
                svg: `
                <svg viewBox="0 0 200 80" class="w-full stroke-current text-gray-700" stroke-width="2">
                    <line x1="10" y1="70" x2="190" y2="70" />
                    <line x1="100" y1="70" x2="140" y2="10" />
                    <text x="50" y="60" font-size="12" stroke="none" fill="black">(7x+5)°</text>
                    <text x="120" y="60" font-size="12" stroke="none" fill="black">(-2x+25)°</text>
                </svg>`,
                options: ["$120^\\circ$", "$160^\\circ$", "$180^\\circ$", "$165^\\circ$"],
                correct: 0, // A
                explanation: "Total sudut berpelurus = 180°. <br> $(7x+5) + (-2x+25) = 180 \\rightarrow 5x + 30 = 180 \\rightarrow 5x = 150 \\rightarrow x = 30$. <br> Nilai $3x+30 = 3(30)+30 = 120$."
            },
            {
                id: 7,
                q: "KPK dan FPB dari bentuk aljabar $4m$ dan $10m^2n$ berturut-turut adalah...",
                options: ["$10m^2n$ dan $2m$", "$10m^2n$ dan $5m$", "$20m^2n$ dan $2m$", "$15m^2n$ dan $5m$"],
                correct: 2, // C
                explanation: "KPK (pangkat tertinggi): KPK(4,10)=20, variabel $m^2n$. <br> FPB (pangkat terendah): FPB(4,10)=2, variabel $m$."
            },
            {
                id: 8,
                q: "Perhatikan gambar. Dua sudut saling berpelurus besarnya $7x^\\circ$ dan $5x^\\circ$. Besar sudut yang lebih besar (ABD) adalah...",
                svg: `
                <svg viewBox="0 0 200 80" class="w-full stroke-current text-gray-700" stroke-width="2">
                    <line x1="10" y1="70" x2="190" y2="70" />
                    <line x1="100" y1="70" x2="60" y2="10" />
                    <text x="65" y="60" font-size="12" stroke="none" fill="black">5x°</text>
                    <text x="110" y="60" font-size="12" stroke="none" fill="black">7x°</text>
                    <text x="60" y="10" dx="-10" font-size="12" stroke="none" fill="black">A</text>
                    <text x="100" y="70" dy="15" font-size="12" stroke="none" fill="black">B</text>
                    <text x="190" y="70" dy="15" font-size="12" stroke="none" fill="black">C</text>
                    <text x="10" y="70" dy="15" font-size="12" stroke="none" fill="black">D</text>
                </svg>`,
                options: ["$119^\\circ$", "$98^\\circ$", "$105^\\circ$", "$112^\\circ$"],
                correct: 2, // C
                explanation: "$7x + 5x = 180 \\rightarrow 12x = 180 \\rightarrow x = 15$. <br> Sudut besar = $7x = 7(15) = 105^\\circ$."
            },
            {
                id: 9,
                q: "Nilai dari $2\\sqrt{5} \\times 3\\sqrt{5}$ adalah...",
                options: ["30", "24", "34", "20"],
                correct: 0, // A
                explanation: "Kalikan luar dengan luar, dalam dengan dalam. <br> $(2 \\times 3) \\times (\\sqrt{5} \\times \\sqrt{5}) = 6 \\times 5 = 30$."
            },
            {
                id: 10,
                q: "Hasil dari $2\\sqrt{8} + 3\\sqrt{27} - \\sqrt{12} + 2\\sqrt{32}$ adalah...",
                options: ["$12\\sqrt{2} - 5\\sqrt{3}$", "$2\\sqrt{2} + 15\\sqrt{3}$", "$12\\sqrt{2} + 7\\sqrt{3}$", "$12\\sqrt{2} - 7\\sqrt{3}$"],
                correct: 2, // C
                explanation: "Sederhanakan: <br> $4\\sqrt{2} + 9\\sqrt{3} - 2\\sqrt{3} + 8\\sqrt{2}$. <br> Gabungkan: $(4+8)\\sqrt{2} + (9-2)\\sqrt{3} = 12\\sqrt{2} + 7\\sqrt{3}$."
            },
            {
                id: 11,
                q: "Bentuk rasional dari $\\frac{-3}{\\sqrt{7}}$ adalah...",
                options: ["$-3\\sqrt{7}$", "$-\\frac{3}{7}\\sqrt{7}$", "$\\sqrt{7}$", "-21"],
                correct: 1, // B
                explanation: "Kalikan sekawan $\\sqrt{7}/\\sqrt{7}$. <br> $\\frac{-3\\sqrt{7}}{7} = -\\frac{3}{7}\\sqrt{7}$."
            },
            {
                id: 12,
                q: "Hasil dari $2^9 \\times 4^{-3} : 2^2$ adalah...",
                options: ["1", "2", "4", "8"],
                correct: 1, // B
                explanation: "Ubah basis 4 ke 2: $4^{-3} = (2^2)^{-3} = 2^{-6}$. <br> $2^9 \\times 2^{-6} : 2^2 = 2^{9-6-2} = 2^1 = 2$."
            },
            {
                id: 13,
                q: "Segitiga PQR siku-siku di P. Jika $PQ=12$ cm dan $PR=5$ cm, maka panjang QR adalah...",
                svg: `
                <svg viewBox="0 0 100 100" class="w-32 h-32 stroke-current text-purple-600" fill="none" stroke-width="2">
                    <polygon points="10,90 90,90 10,30" />
                    <text x="5" y="95" font-size="12" stroke="none" fill="black">P</text>
                    <text x="95" y="95" font-size="12" stroke="none" fill="black">R</text>
                    <text x="5" y="25" font-size="12" stroke="none" fill="black">Q</text>
                    <text x="50" y="95" font-size="10" stroke="none" fill="black">5</text>
                    <text x="5" y="60" font-size="10" stroke="none" fill="black">12</text>
                </svg>`,
                options: ["13 cm", "12 cm", "15 cm", "10 cm"],
                correct: 0, // A
                explanation: "Pythagoras sisi miring: $\\sqrt{12^2 + 5^2} = \\sqrt{144+25} = \\sqrt{169} = 13$ cm."
            },
            {
                id: 14,
                q: "Segitiga LMN siku-siku di L. Jika $LM=5$ cm dan sisi miring $MN=13$ cm, maka panjang LN adalah...",
                svg: `
                <svg viewBox="0 0 100 100" class="w-32 h-32 stroke-current text-purple-600" fill="none" stroke-width="2">
                    <polygon points="10,90 90,90 10,10" />
                    <text x="5" y="95" font-size="12" stroke="none" fill="black">L</text>
                    <text x="95" y="95" font-size="12" stroke="none" fill="black">N</text>
                    <text x="5" y="10" font-size="12" stroke="none" fill="black">M</text>
                    <text x="50" y="60" font-size="10" stroke="none" fill="black">13</text>
                    <text x="5" y="60" dx="-15" font-size="10" stroke="none" fill="black">5</text>
                </svg>`,
                options: ["15 cm", "10 cm", "13 cm", "12 cm"],
                correct: 3, // D
                explanation: "Pythagoras sisi tegak: $\\sqrt{13^2 - 5^2} = \\sqrt{169-25} = \\sqrt{144} = 12$ cm."
            },
            {
                id: 15,
                q: "Jarak antara dua titik $A(3,-4)$ dan $B(-5,3)$ adalah...",
                options: ["$\\sqrt{112}$", "$\\sqrt{113}$", "$\\sqrt{115}$", "$\\sqrt{110}$"],
                correct: 1, // B
                explanation: "Rumus jarak: $\\sqrt{(x_2-x_1)^2 + (y_2-y_1)^2}$. <br> $\\sqrt{(-5-3)^2 + (3-(-4))^2} = \\sqrt{(-8)^2 + 7^2} = \\sqrt{64+49} = \\sqrt{113}$."
            },
            {
                id: 16,
                q: "Sebuah tangga sepanjang 5 m disandarkan pada pohon. Jarak ujung bawah tangga terhadap pohon adalah 3 m. Berapa tinggi ujung atas tangga dari tanah?",
                svg: `
                <svg viewBox="0 0 100 100" class="w-32 h-32 stroke-current text-green-700" fill="none" stroke-width="2">
                    <line x1="20" y1="10" x2="20" y2="90" stroke="brown" stroke-width="4" /> <!-- Pohon -->
                    <line x1="10" y1="90" x2="90" y2="90" stroke="black" /> <!-- Tanah -->
                    <line x1="50" y1="90" x2="20" y2="40" stroke="gray" stroke-width="3" /> <!-- Tangga -->
                    <text x="40" y="70" font-size="10" stroke="none" fill="black">5m</text>
                    <text x="35" y="95" font-size="10" stroke="none" fill="black">3m</text>
                </svg>`,
                options: ["4 m", "5 m", "3 m", "6 m"],
                correct: 0, // A
                explanation: "Tripel Pythagoras 3, 4, 5. <br> Tinggi = $\\sqrt{5^2 - 3^2} = \\sqrt{16} = 4$ m."
            },
            {
                id: 17,
                q: "Sebuah limas persegi memiliki keliling alas 40 cm dan tinggi limas 12 cm. Luas permukaan limas adalah...",
                options: ["360 cm²", "380 cm²", "400 cm²", "420 cm²"],
                correct: 0, // A
                explanation: "Sisi alas = $40:4 = 10$. Luas alas = $10^2 = 100$. <br> Tinggi sisi tegak segitiga (Pythagoras): $\\sqrt{12^2 + 5^2} = 13$. <br> Luas selimut = $4 \\times (\\frac{1}{2} \\times 10 \\times 13) = 260$. <br> Total LP = $100 + 260 = 360$."
            },
            {
                id: 18,
                q: "Sebuah foto $18 \\times 12$ cm diperbesar hingga panjangnya 24 cm. Perbandingan luas foto sebelum dan sesudah diperbesar adalah...",
                options: ["3 : 4", "9 : 16", "2 : 5", "7 : 15"],
                correct: 1, // B
                explanation: "Perbandingan panjang = $18:24 = 3:4$. <br> Perbandingan luas = kuadrat perbandingan panjang = $3^2 : 4^2 = 9 : 16$."
            },
            {
                id: 19,
                q: "Sebuah balok berukuran $15 \\times 11 \\times 9$ cm. Luas permukaan balok tersebut adalah...",
                options: ["798 cm²", "796 cm²", "797 cm²", "795 cm²"],
                correct: 0, // A
                explanation: "$LP = 2(pl + pt + lt) = 2(165 + 135 + 99) = 2(399) = 798$."
            },
            {
                id: 20,
                q: "Perhatikan data nilai: 4(3), 5(7), 6(6), 7(8), 8(9), 9(5), 10(2). Mean dan median berturut-turut adalah...",
                options: ["6,90 dan 7,00", "7,10 dan 7,00", "6,90 dan 7,50", "7,10 dan 7,50"],
                correct: 0, // A
                explanation: "Mean = $\\frac{\\text{Jumlah Nilai}}{\\text{Total Data}} = \\frac{276}{40} = 6,9$. <br> Median (data ke-20 dan 21) adalah 7."
            }
        ]
    },
            "D": {
        title: "Paket D (Ultimate)",
        time: 90, // menit
        questions: [
            {
                id: 1,
                q: "Bentuk sederhana dari pecahan $\\frac{\\sqrt{5}}{3-\\sqrt{5}}$ adalah...",
                options: ["$\\frac{3\\sqrt{5}+5}{3}$", "$\\frac{3\\sqrt{5}+5}{4}$", "$\\frac{3\\sqrt{5}-5}{3}$", "$\\frac{\\sqrt{5}-5}{3}$"],
                correct: 1, // B
                explanation: "Rasionalkan penyebut dengan mengalikan sekawannya $(3+\\sqrt{5})$. <br> $\\frac{\\sqrt{5}(3+\\sqrt{5})}{9-5} = \\frac{3\\sqrt{5}+5}{4}$."
            },
            {
                id: 2,
                q: "Bentuk sederhana dari $2\\sqrt{28} + \\sqrt{20} + \\sqrt{125}$ adalah...",
                options: ["$4\\sqrt{7}+7\\sqrt{5}$", "$4\\sqrt{7}+5\\sqrt{5}$", "$4\\sqrt{5}+7\\sqrt{7}$", "$2\\sqrt{7}+3\\sqrt{5}$"],
                correct: 0, // A
                explanation: "Sederhanakan akar: <br> $2\\sqrt{4\\times7} + \\sqrt{4\\times5} + \\sqrt{25\\times5}$ <br> $= 4\\sqrt{7} + 2\\sqrt{5} + 5\\sqrt{5} = 4\\sqrt{7} + 7\\sqrt{5}$."
            },
            {
                id: 3,
                q: "Bentuk akar dari bilangan berpangkat $7^{\\frac{5}{2}}$ adalah...",
                options: ["$\\sqrt[5]{7^7}$", "$\\sqrt{7^2}$", "$\\sqrt{7^5}$", "$\\sqrt[5]{7^2}$"],
                correct: 2, // C
                explanation: "Sifat eksponen: $a^{\\frac{m}{n}} = \\sqrt[n]{a^m}$. <br> Maka $7^{\\frac{5}{2}} = \\sqrt[2]{7^5} = \\sqrt{7^5}$."
            },
            {
                id: 4,
                q: "Nilai dari $\\frac{1}{15^6}$ dalam bentuk pangkat negatif adalah...",
                options: ["$-15^6$", "$15^{-6}$", "$6^{-13}$", "$-6^{13}$"],
                correct: 1, // B
                explanation: "Sifat eksponen negatif: $\\frac{1}{a^n} = a^{-n}$."
            },
            {
                id: 5,
                q: "Hasil dari operasi $216^{\\frac{1}{3}} - 16^{\\frac{1}{4}} + 125^{\\frac{2}{3}}$ adalah...",
                options: ["21", "22", "29", "34"],
                correct: 2, // C
                explanation: "$\\sqrt[3]{216} - \\sqrt[4]{16} + (\\sqrt[3]{125})^2$ <br> $= 6 - 2 + 5^2 = 6 - 2 + 25 = 29$."
            },
            {
                id: 6,
                q: "Bentuk sederhana dari perkalian $(\\sqrt{6}+\\sqrt{3})(\\sqrt{6}-\\sqrt{3})$ adalah...",
                options: ["2", "6", "5", "3"],
                correct: 3, // D
                explanation: "Rumus selisih dua kuadrat $(a+b)(a-b) = a^2 - b^2$. <br> $(\\sqrt{6})^2 - (\\sqrt{3})^2 = 6 - 3 = 3$."
            },
            {
                id: 7,
                q: "Nilai $x$ dari persamaan $6x - 4 = 5x + 2$ adalah...",
                options: ["6", "4", "5", "2"],
                correct: 0, // A
                explanation: "Pindahkan suku sejenis: $6x - 5x = 2 + 4 \\rightarrow x = 6$."
            },
            {
                id: 8,
                q: "Faktor dari bentuk kuadrat $3x^2 - 12$ adalah...",
                options: ["$(3x-4)(x+3)$", "$(3x+2)(x-6)$", "$3(x+2)(x-2)$", "$3(x+6)(x-6)$"],
                correct: 2, // C
                explanation: "Keluarkan faktor persekutuan 3: $3(x^2 - 4)$. <br> Faktorkan selisih kuadrat: $3(x+2)(x-2)$."
            },
            {
                id: 9,
                q: "Pemfaktoran dari persamaan kuadrat $x^2 + 2x - 48$ adalah...",
                options: ["$(x-6)(x-8)$", "$(x+8)(x-6)$", "$(x-4)(x-12)$", "$(x+24)(x-2)$"],
                correct: 1, // B
                explanation: "Cari dua bilangan yang dikali hasilnya -48 dan dijumlah hasilnya 2. <br> Bilangan tersebut adalah 8 dan -6. Maka $(x+8)(x-6)$."
            },
            {
                id: 10,
                q: "Sebuah tangki minyak berbentuk tabung berisi 183,69 liter minyak. Jika jari-jari tangki 30 cm, berapakah tingginya?",
                options: ["3,5 dm", "4,5 dm", "5,5 dm", "6,5 dm"],
                correct: 3, // D
                explanation: "Volume = 183,69 liter ($dm^3$). $r=30$ cm $= 3$ dm. <br> $V = \\pi r^2 t \\rightarrow 183,69 = 3,14 \\times 3^2 \\times t$. <br> $183,69 = 28,26 t \\rightarrow t = 6,5$ dm."
            },
            {
                id: 11,
                q: "Sebuah kerucut memiliki jari-jari alas 4 cm dan tinggi 12 cm. Volume kerucut tersebut adalah...",
                svg: `
                <svg viewBox="0 0 100 120" class="w-24 h-32 stroke-current text-red-600" fill="none" stroke-width="2">
                    <ellipse cx="50" cy="100" rx="40" ry="10" />
                    <line x1="10" y1="100" x2="50" y2="10" />
                    <line x1="90" y1="100" x2="50" y2="10" />
                    <line x1="50" y1="10" x2="50" y2="100" stroke-dasharray="4" opacity="0.5"/>
                    <text x="60" y="60" font-size="10" stroke="none" fill="black">t=12</text>
                    <text x="50" y="115" font-size="10" stroke="none" fill="black">r=4</text>
                </svg>`,
                options: ["200,96 cm³", "150,75 cm³", "301,44 cm³", "420,05 cm³"],
                correct: 0, // A
                explanation: "$V = \\frac{1}{3} \\pi r^2 t = \\frac{1}{3} \\times 3,14 \\times 16 \\times 12 = 3,14 \\times 64 = 200,96$."
            },
            {
                id: 12,
                q: "Luas permukaan bola yang berjari-jari 4 cm adalah...",
                options: ["96,375 cm²", "100,43 cm²", "200,96 cm²", "213,01 cm²"],
                correct: 2, // C
                explanation: "$L = 4 \\pi r^2 = 4 \\times 3,14 \\times 4^2 = 4 \\times 3,14 \\times 16 = 200,96$ cm²."
            },
            {
                id: 13,
                q: "Jarak dua pusat lingkaran adalah 17 cm, panjang garis singgung persekutuan dalam 15 cm. Jika jari-jari salah satu lingkaran 3 cm, berapakah jari-jari lingkaran lainnya?",
                svg: `
                <svg viewBox="0 0 200 100" class="w-full stroke-current text-gray-700" stroke-width="2">
                    <circle cx="30" cy="50" r="20" />
                    <circle cx="170" cy="50" r="10" />
                    <line x1="30" y1="50" x2="170" y2="50" stroke-dasharray="4" />
                    <line x1="45" y1="35" x2="165" y2="55" stroke="red" /> <!-- GSPD -->
                    <text x="100" y="45" font-size="10" stroke="none" fill="black">p=17</text>
                    <text x="100" y="30" font-size="10" stroke="none" fill="red">d=15</text>
                </svg>`,
                options: ["3 cm", "5 cm", "6 cm", "7 cm"],
                correct: 1, // B
                explanation: "Rumus GSPD: $d^2 = p^2 - (r1+r2)^2$. <br> $15^2 = 17^2 - (3+r2)^2 \\rightarrow 225 = 289 - (3+r2)^2$. <br> $(3+r2)^2 = 64 \\rightarrow 3+r2 = 8 \\rightarrow r2 = 5$."
            },
            {
                id: 14,
                q: "Segitiga ABC siku-siku di A. Jika $AB=5$ cm dan $BC=13$ cm, maka panjang AC adalah...",
                svg: `
                <svg viewBox="0 0 100 100" class="w-32 h-32 stroke-current text-purple-600" fill="none" stroke-width="2">
                    <polygon points="10,90 90,90 10,30" />
                    <text x="5" y="95" font-size="12" stroke="none" fill="black">A</text>
                    <text x="95" y="95" font-size="12" stroke="none" fill="black">C</text>
                    <text x="5" y="25" font-size="12" stroke="none" fill="black">B</text>
                    <text x="50" y="60" font-size="10" stroke="none" fill="black">13</text>
                    <text x="5" y="60" dx="-15" font-size="10" stroke="none" fill="black">5</text>
                </svg>`,
                options: ["15 cm", "10 cm", "13 cm", "12 cm"],
                correct: 3, // D
                explanation: "Siku-siku di A, berarti BC adalah sisi miring. <br> $AC = \\sqrt{13^2 - 5^2} = \\sqrt{169-25} = \\sqrt{144} = 12$."
            },
            {
                id: 15,
                q: "Jarak kedua pusat lingkaran 20 cm, garis singgung persekutuan luar 16 cm. Jika jari-jari besar 5 kali jari-jari kecil, tentukan panjang salah satu jari-jari.",
                options: ["2 cm", "3 cm", "8 cm", "12 cm"],
                correct: 1, // B
                explanation: "GSPL: $16^2 = 20^2 - (5r-r)^2 \\rightarrow 256 = 400 - (4r)^2$. <br> $16r^2 = 144 \\rightarrow r^2 = 9 \\rightarrow r = 3$."
            },
            {
                id: 16,
                q: "Diketahui tabel nilai: Nilai 4 (1 siswa), 5 (10 siswa), 6 (15 siswa), 7 (4 siswa). Median dari data tersebut adalah...",
                options: ["4", "6", "7", "15"],
                correct: 1, // B
                explanation: "Total frekuensi = 30. Median adalah rata-rata data ke-15 dan 16. <br> Data ke-1 sampai 11 adalah 4 dan 5. Data ke-12 sampai 26 adalah 6. <br> Jadi data ke-15 dan 16 bernilai 6."
            },
            {
                id: 17,
                q: "Volume kubus sama dengan volume balok (64.000). Panjang balok 2 kali sisi kubus, lebar dan tinggi balok sama. Berapa lebar balok?",
                options: ["$20\\sqrt{2}$", "40", "$40\\sqrt{2}$", "80"],
                correct: 0, // A
                explanation: "Sisi kubus = 40. Panjang balok = 80. <br> $64000 = 80 \\times l \\times l \\rightarrow l^2 = 800 \\rightarrow l = 20\\sqrt{2}$."
            },
            {
                id: 18,
                q: "Jarak antara dua titik $A(-4,3)$ dan $B(2,-5)$ adalah...",
                options: ["12", "10", "14", "16"],
                correct: 1, // B
                explanation: "Rumus jarak: $\\sqrt{(2-(-4))^2 + (-5-3)^2} = \\sqrt{6^2 + (-8)^2} = \\sqrt{36+64} = 10$."
            },
            {
                id: 19,
                q: "Sebuah segitiga siku-siku memiliki sisi miring 35 cm dan sisi alas 28 cm. Luas segitiga tersebut adalah...",
                options: ["265 cm²", "280 cm²", "294 cm²", "330 cm²"],
                correct: 2, // C
                explanation: "Tinggi = $\\sqrt{35^2 - 28^2} = \\sqrt{1225-784} = \\sqrt{441} = 21$. <br> Luas = $\\frac{1}{2} \\times 28 \\times 21 = 14 \\times 21 = 294$."
            },
            {
                id: 20,
                q: "Sebuah bak mandi kubus (kedalaman 90 cm) berisi air $\\frac{2}{3}$ bagian. Jika digunakan 40 liter, sisa air adalah...",
                options: ["344 liter", "442 liter", "364 liter", "446 liter"],
                correct: 3, // D
                explanation: "Volume penuh = $90^3$ cm³ = 729 liter. <br> Isi awal = $\\frac{2}{3} \\times 729 = 486$ liter. <br> Sisa = $486 - 40 = 446$ liter."
            }
        ]
    }
        };

        // --- STATE VARIABLES ---
        let currentPackage = null;
        let timerInterval = null;
        let timeLeft = 0;
        let userAnswers = {}; // { questionIndex: optionIndex }

        // --- DOM ELEMENTS ---
        const homeScreen = document.getElementById('home-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const timerDisplay = document.getElementById('timer-display');
        const questionsContainer = document.getElementById('questions-container');

        // --- FUNCTIONS ---

        function startQuiz(pkgId) {
            currentPackage = quizData[pkgId];
            userAnswers = {};
            timeLeft = currentPackage.time * 60; // seconds

            // UI Switching
            homeScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            timerDisplay.classList.remove('hidden');

            // Header Info
            document.getElementById('package-title').innerText = currentPackage.title;
            
            // Render Questions
            renderQuestions();

            // Start Timer
            startTimer();
            
            // Render Math (Initial)
            renderMathInElement(document.body);
            window.scrollTo(0,0);
        }

        function renderQuestions() {
            questionsContainer.innerHTML = '';
            
            currentPackage.questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = "bg-white p-6 rounded-lg shadow-sm border border-gray-100";
                
                // SVG rendering if exists
                const svgContent = q.svg ? `<div class="svg-container">${q.svg}</div>` : '';

                let optionsHtml = '';
                q.options.forEach((opt, optIdx) => {
                    optionsHtml += `
                        <label class="block mb-3 cursor-pointer group">
                            <input type="radio" name="q${index}" value="${optIdx}" class="hidden option-input" onchange="saveAnswer(${index}, ${optIdx})">
                            <div class="option-content flex items-center p-3 border rounded-lg hover:bg-blue-50 transition group-hover:border-blue-400">
                                <span class="w-8 h-8 flex items-center justify-center bg-gray-100 text-gray-600 rounded-full mr-3 text-sm font-bold border shrink-0 transition group-hover:bg-blue-200 group-hover:text-blue-800">
                                    ${String.fromCharCode(65 + optIdx)}
                                </span>
                                <span class="math-content text-gray-700">${opt}</span>
                            </div>
                        </label>
                    `;
                });

                questionDiv.innerHTML = `
                    <div class="mb-4">
                        <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mb-2 font-bold">Soal ${index + 1}</span>
                        <div class="text-lg font-medium text-gray-800">${q.q}</div>
                        ${svgContent}
                    </div>
                    <div class="mt-4">
                        ${optionsHtml}
                    </div>
                `;
                questionsContainer.appendChild(questionDiv);
            });
            
            // Re-render math specifically for new content
            renderMathInElement(questionsContainer, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
        }

        function saveAnswer(qIndex, optIndex) {
            userAnswers[qIndex] = optIndex;
            
            // Update Progress UI
            const answeredCount = Object.keys(userAnswers).length;
            const total = currentPackage.questions.length;
            document.getElementById('progress-text').innerText = `Terjawab: ${answeredCount}/${total}`;
        }

        function startTimer() {
            clearInterval(timerInterval);
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert("Waktu Habis! Jawaban Anda akan dikirim otomatis.");
                    submitQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.innerText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Warning color
            if (timeLeft < 300) { // less than 5 mins
                timerDisplay.classList.remove('bg-blue-500');
                timerDisplay.classList.add('bg-red-600', 'animate-pulse');
            } else {
                timerDisplay.classList.remove('bg-red-600', 'animate-pulse');
                timerDisplay.classList.add('bg-blue-500');
            }
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            let score = 0;
            let total = currentPackage.questions.length;
            
            // Calculate Score
            currentPackage.questions.forEach((q, index) => {
                if (userAnswers[index] === q.correct) {
                    score++;
                }
            });
            
            const finalScore = Math.round((score / total) * 100);
            document.getElementById('final-score').innerText = finalScore;
            
            renderResults();
            
            // Switch UI
            quizScreen.classList.add('hidden');
            timerDisplay.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            window.scrollTo(0,0);
        }

        function renderResults() {
            const container = document.getElementById('discussion-container');
            container.innerHTML = '';
            
            currentPackage.questions.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === q.correct;
                const userLabel = userAnswer !== undefined ? String.fromCharCode(65 + userAnswer) : "-";
                const correctLabel = String.fromCharCode(65 + q.correct);
                
                const statusColor = isCorrect ? "bg-green-100 border-green-300" : "bg-red-50 border-red-200";
                const statusText = isCorrect ? "<span class='text-green-700 font-bold'>Benar</span>" : "<span class='text-red-700 font-bold'>Salah</span>";

                const svgContent = q.svg ? `<div class="svg-container w-full max-w-[200px]">${q.svg}</div>` : '';

                const div = document.createElement('div');
                div.className = `p-4 rounded-lg border ${statusColor}`;
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div class="font-bold text-gray-700">Soal ${index + 1}</div>
                        <div>${statusText}</div>
                    </div>
                    <div class="mb-3 text-gray-800">${q.q}</div>
                    ${svgContent}
                    <div class="text-sm grid grid-cols-2 gap-2 mt-3 bg-white p-3 rounded">
                        <div>Jawaban Anda: <span class="font-bold">${userLabel}</span></div>
                        <div>Kunci Jawaban: <span class="font-bold text-green-600">${correctLabel}</span></div>
                    </div>
                    <div class="mt-3 pt-2 border-t border-gray-200 text-sm">
                        <strong class="text-gray-600">Pembahasan:</strong>
                        <div class="mt-1 text-gray-700 bg-gray-50 p-2 rounded">${q.explanation}</div>
                    </div>
                `;
                container.appendChild(div);
            });
            
            // Render Math in Results
            renderMathInElement(container, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
        }

        function resetApp() {
            resultScreen.classList.add('hidden');
            homeScreen.classList.remove('hidden');
            currentPackage = null;
        }

        function retryQuiz() {
            // Restart same package
            const pkgId = Object.keys(quizData).find(key => quizData[key] === currentPackage);
            startQuiz(pkgId);
        }

        // Initialize KaTeX Auto Render on Load (for any static math)
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body);
        });

    </script>
</body>
</html>
