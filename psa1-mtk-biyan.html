<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan Soal Matematika Kelas VIII - PAS Ganjil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- KaTeX for math rendering inside questions -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&family=Nunito:wght@400;600;700&display=swap');
        body { font-family: 'Nunito', sans-serif; }
        h1, h2, h3 { font-family: 'Fredoka', sans-serif; }
        
        .option-label { cursor: pointer; transition: all 0.2s; }
        .option-input:checked + .option-label {
            background-color: #fee2e2; /* red-100 (using warm colors for math) */
            border-color: #ef4444; /* red-500 */
            color: #991b1b; /* red-800 */
        }
        .correct-answer { background-color: #d1fae5 !important; border-color: #10b981 !important; color: #065f46 !important; }
        .wrong-answer { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b !important; }
        
        .math-tex { font-size: 1.1em; }
    </style>
</head>
<body class="bg-orange-50 text-gray-800">

    <!-- Header -->
    <header class="bg-orange-600 text-white p-6 shadow-md sticky top-0 z-50">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold">Latihan Matematika</h1>
                <p class="text-sm opacity-90">Kelas VIII - Kisi-Kisi 6 Desember 2025</p>
            </div>
            <div class="text-3xl">üìê</div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto p-4 md:p-6 min-h-screen">
        
        <!-- Start Screen -->
        <div id="start-screen" class="bg-white rounded-xl shadow-lg p-8 text-center mt-10 border-t-8 border-orange-500">
            <div class="mb-6">
                <svg class="w-24 h-24 mx-auto text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
            </div>
            <h2 class="text-3xl font-bold mb-4">Siap Hitung-hitungan?</h2>
            <p class="text-gray-600 mb-6">
                Terdiri dari <b>40 Soal</b> (Pilihan Ganda).<br>
                Materi: Pangkat & Akar, Pythagoras, PLSV, dan PtSLV.
                <br><span class="text-xs text-orange-600 font-bold">*Siapkan kertas coretan!</span>
            </p>
            <button onclick="startQuiz()" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg transition transform hover:scale-105">
                Mulai Mengerjakan
            </button>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="hidden space-y-8 pb-20">
            <!-- Questions injected via JS -->
        </div>

        <!-- Result Container -->
        <div id="result-container" class="hidden bg-white rounded-xl shadow-lg p-8 text-center mt-10 mb-10 border-t-8 border-green-500">
            <h2 class="text-3xl font-bold mb-2">Hasil Akhir</h2>
            <div class="text-6xl font-extrabold text-orange-600 mb-4" id="score-display">0</div>
            <p class="text-gray-600 mb-6">Nilai Latihan Kamu</p>
            <div class="flex justify-center gap-4 text-sm font-semibold mb-6">
                <div class="text-green-700 bg-green-100 px-4 py-2 rounded-lg">Benar: <span id="correct-count">0</span></div>
                <div class="text-red-700 bg-red-100 px-4 py-2 rounded-lg">Salah: <span id="wrong-count">0</span></div>
            </div>
            <button onclick="location.reload()" class="bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-6 rounded-lg">
                Coba Lagi
            </button>
        </div>

    </main>

    <!-- Floating Submit Button -->
    <div id="submit-bar" class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 p-4 shadow-lg hidden z-40">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <span class="text-sm text-gray-500 font-medium hidden md:inline">Cek kembali jawabanmu.</span>
            <button onclick="submitQuiz()" class="w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition">
                Kirim Jawaban
            </button>
        </div>
    </div>

    <script>
        // Gunakan format LaTeX sederhana dengan double backslash \\ untuk Math
        const questions = [
            // --- BILANGAN BERPANGKAT & NOTASI ILMIAH (1-8) ---
            {
                no: 1,
                text: "Hasil dari operasi \\( 2^3 \\times 2^4 \\) adalah...",
                options: ["\\( 2^7 \\)", "\\( 2^{12} \\)", "\\( 4^7 \\)", "\\( 4^{12} \\)"],
                correct: 0,
                desc: "Sifat perkalian pangkat: \\( a^m \\times a^n = a^{m+n} \\). Jadi \\( 2^{3+4} = 2^7 \\)."
            },
            {
                no: 2,
                text: "Bentuk notasi ilmiah dari bilangan 0,000056 adalah...",
                options: ["\\( 5,6 \\times 10^{-6} \\)", "\\( 5,6 \\times 10^{-5} \\)", "\\( 56 \\times 10^{-6} \\)", "\\( 0,56 \\times 10^{-4} \\)"],
                correct: 1,
                desc: "Geser koma ke kanan 5 kali hingga menjadi 5,6. Karena desimal kecil, pangkat negatif: \\( 5,6 \\times 10^{-5} \\)."
            },
            {
                no: 3,
                text: "Hasil dari \\( \\sqrt{18} + \\sqrt{50} \\) adalah...",
                options: ["\\( 8\\sqrt{2} \\)", "\\( 2\\sqrt{8} \\)", "\\( \\sqrt{68} \\)", "\\( 5\\sqrt{2} \\)"],
                correct: 0,
                desc: "\\( \\sqrt{18} = \\sqrt{9 \\times 2} = 3\\sqrt{2} \\). \\( \\sqrt{50} = \\sqrt{25 \\times 2} = 5\\sqrt{2} \\). Total: \\( 3\\sqrt{2} + 5\\sqrt{2} = 8\\sqrt{2} \\)."
            },
            {
                no: 4,
                text: "Hasil dari \\( \\sqrt{3} \\times \\sqrt{12} \\) adalah...",
                options: ["\\( \\sqrt{15} \\)", "6", "36", "\\( 2\\sqrt{3} \\)"],
                correct: 1,
                desc: "\\( \\sqrt{3 \\times 12} = \\sqrt{36} = 6 \\)."
            },
            {
                no: 5,
                text: "Arti dari \\( 5^4 \\) adalah...",
                options: ["\\( 5 + 5 + 5 + 5 \\)", "\\( 4 \\times 5 \\)", "\\( 5 \\times 5 \\times 5 \\times 5 \\)", "\\( 4 \\times 4 \\times 4 \\times 4 \\times 4 \\)"],
                correct: 2,
                desc: "Pangkat menunjukkan perkalian berulang."
            },
            {
                no: 6,
                text: "Hasil dari \\( (-3)^3 \\) adalah...",
                options: ["-27", "-9", "9", "27"],
                correct: 0,
                desc: "\\( (-3) \\times (-3) \\times (-3) = 9 \\times (-3) = -27 \\)."
            },
            {
                no: 7,
                text: "Hasil operasi \\( \\frac{3^6}{3^2} \\) adalah...",
                options: ["\\( 3^3 \\)", "\\( 3^4 \\)", "\\( 3^8 \\)", "\\( 1^4 \\)"],
                correct: 1,
                desc: "Sifat pembagian pangkat: \\( a^m : a^n = a^{m-n} \\). Jadi \\( 3^{6-2} = 3^4 \\)."
            },
            {
                no: 8,
                text: "Bentuk sederhana dari \\( 3\\sqrt{5} - \\sqrt{20} \\) adalah...",
                options: ["\\( \\sqrt{5} \\)", "\\( 2\\sqrt{5} \\)", "\\( \\sqrt{15} \\)", "0"],
                correct: 0,
                desc: "\\( \\sqrt{20} = 2\\sqrt{5} \\). Jadi \\( 3\\sqrt{5} - 2\\sqrt{5} = 1\\sqrt{5} \\)."
            },

            // --- TEOREMA PYTHAGORAS (9-18) ---
            {
                no: 9,
                text: "Pada segitiga siku-siku, sisi terpanjang yang berada di depan sudut siku-siku disebut...",
                options: ["Sisi tegak", "Sisi siku-siku", "Hipotenusa", "Sisi tinggi"],
                correct: 2,
                desc: "Sisi miring atau sisi terpanjang pada segitiga siku-siku disebut hipotenusa."
            },
            {
                no: 10,
                text: "Jika a dan b adalah sisi siku-siku dan c adalah hipotenusa, rumus Pythagoras yang benar adalah...",
                options: ["\\( a^2 + c^2 = b^2 \\)", "\\( c^2 - a^2 = b^2 \\)", "\\( c^2 + a^2 = b^2 \\)", "\\( a^2 - b^2 = c^2 \\)"],
                correct: 1,
                desc: "Rumus dasar: \\( a^2 + b^2 = c^2 \\). Maka \\( b^2 = c^2 - a^2 \\)."
            },
            {
                no: 11,
                text: "Sebuah segitiga siku-siku memiliki panjang alas 3 cm dan tinggi 4 cm. Keliling segitiga tersebut adalah...",
                options: ["10 cm", "12 cm", "7 cm", "14 cm"],
                correct: 1,
                desc: "Cari sisi miring: \\( \\sqrt{3^2 + 4^2} = \\sqrt{25} = 5 \\). Keliling = 3 + 4 + 5 = 12 cm."
            },
            {
                no: 12,
                text: "Sebuah tangga sepanjang 5 meter disandarkan pada tembok. Jarak kaki tangga ke tembok 3 meter. Tinggi tembok yang dicapai tangga adalah...",
                options: ["2 meter", "3 meter", "4 meter", "8 meter"],
                correct: 2,
                desc: "Tripel Pythagoras 3, 4, 5. Atau \\( \\sqrt{5^2 - 3^2} = \\sqrt{16} = 4 \\)."
            },
            {
                no: 13,
                text: "Kapal berlayar ke Utara 12 km, lalu ke Timur 5 km. Jarak terdekat kapal dari titik awal adalah...",
                options: ["13 km", "17 km", "7 km", "15 km"],
                correct: 0,
                desc: "\\( \\sqrt{12^2 + 5^2} = \\sqrt{144 + 25} = \\sqrt{169} = 13 \\)."
            },
            {
                no: 14,
                text: "Kelompok bilangan berikut yang membentuk segitiga siku-siku adalah...",
                options: ["3, 4, 6", "5, 12, 13", "6, 8, 12", "7, 8, 9"],
                correct: 1,
                desc: "Cek: \\( 5^2 + 12^2 = 25 + 144 = 169 \\). \\( 13^2 = 169 \\). Sama, berarti siku-siku."
            },
            {
                no: 15,
                text: "Jika \\( a^2 + b^2 < c^2 \\) (kuadrat sisi terpanjang lebih besar dari jumlah kuadrat sisi lain), maka jenis segitiganya adalah...",
                options: ["Siku-siku", "Lancip", "Tumpul", "Sama sisi"],
                correct: 2,
                desc: "Jika \\( c^2 > a^2 + b^2 \\), maka segitiga Tumpul."
            },
            {
                no: 16,
                text: "Manakah yang merupakan tripel Pythagoras?",
                options: ["10, 24, 25", "8, 15, 17", "7, 24, 26", "9, 12, 16"],
                correct: 1,
                desc: "\\( 8^2 + 15^2 = 64 + 225 = 289 \\). \\( 17^2 = 289 \\). Cocok."
            },
            {
                no: 17,
                text: "Segitiga siku-siku memiliki hipotenusa 20 cm dan salah satu sisi siku-sikunya 12 cm. Panjang sisi lainnya adalah...",
                options: ["8 cm", "10 cm", "16 cm", "15 cm"],
                correct: 2,
                desc: "\\( \\sqrt{20^2 - 12^2} = \\sqrt{400 - 144} = \\sqrt{256} = 16 \\)."
            },
            {
                no: 18,
                text: "Perbandingan sisi segitiga siku-siku sama kaki (sudut 45¬∞-45¬∞-90¬∞) adalah...",
                options: ["1 : 2 : 3", "1 : 1 : \\( \\sqrt{2} \\)", "1 : \\( \\sqrt{3} \\) : 2", "3 : 4 : 5"],
                correct: 1,
                desc: "Segitiga siku-siku sama kaki memiliki perbandingan sisi 1 : 1 : \\( \\sqrt{2} \\)."
            },

            // --- PLSV (19-27) ---
            {
                no: 19,
                text: "Kalimat yang belum dapat ditentukan nilai kebenarannya (benar atau salah) disebut...",
                options: ["Kalimat Tertutup", "Kalimat Terbuka", "Pernyataan", "Kesamaan"],
                correct: 1,
                desc: "Kalimat terbuka memuat variabel sehingga belum tahu benar/salahnya."
            },
            {
                no: 20,
                text: "Di bawah ini yang merupakan kalimat tertutup bernilai benar adalah...",
                options: ["Presiden RI pertama adalah Ir. Soekarno", "X + 5 = 10", "Kota Pontianak ada di Jawa", "2 adalah bilangan ganjil"],
                correct: 0,
                desc: "Kalimat tertutup sudah jelas benar atau salahnya."
            },
            {
                no: 21,
                text: "Manakah yang merupakan Persamaan Linear Satu Variabel (PLSV)?",
                options: ["\\( x + y = 5 \\)", "\\( x^2 + 2 = 6 \\)", "\\( 2x + 5 = 11 \\)", "\\( x > 5 \\)"],
                correct: 2,
                desc: "PLSV hanya punya 1 variabel dan pangkat tertingginya 1. Opsi C tepat."
            },
            {
                no: 22,
                text: "Model matematika dari 'Tiga kali sebuah bilangan ditambah 5 hasilnya 20' adalah...",
                options: ["\\( 3x - 5 = 20 \\)", "\\( 3 + x = 20 \\)", "\\( 3x + 5 = 20 \\)", "\\( 3(x+5) = 20 \\)"],
                correct: 2,
                desc: "Tiga kali bilangan (3x) ditambah 5 (+5) hasilnya (=) 20."
            },
            {
                no: 23,
                text: "Keliling persegi adalah 40 cm. Jika sisi persegi adalah \\( s \\), model matematikanya...",
                options: ["\\( s = 40 \\)", "\\( 4s = 40 \\)", "\\( s^2 = 40 \\)", "\\( 2s = 40 \\)"],
                correct: 1,
                desc: "Rumus keliling persegi = 4 x sisi. Jadi \\( 4s = 40 \\)."
            },
            {
                no: 24,
                text: "Penyelesaian dari persamaan \\( 4x - 5 = 7 \\) adalah...",
                options: ["x = 2", "x = 3", "x = 4", "x = 5"],
                correct: 1,
                desc: "\\( 4x = 7 + 5 \\) -> \\( 4x = 12 \\) -> \\( x = 3 \\)."
            },
            {
                no: 25,
                text: "Umur Budi 5 tahun lebih tua dari umur Andi. Jumlah umur mereka 25 tahun. Berapakah umur Andi?",
                options: ["10 tahun", "15 tahun", "12 tahun", "13 tahun"],
                correct: 0,
                desc: "Misal Andi = x, Budi = x+5. \\( x + (x+5) = 25 \\) -> \\( 2x = 20 \\) -> \\( x = 10 \\)."
            },
            {
                no: 26,
                text: "Nilai x yang memenuhi \\( 2(x + 3) = 14 \\) adalah...",
                options: ["4", "5", "6", "7"],
                correct: 0,
                desc: "\\( 2x + 6 = 14 \\) -> \\( 2x = 8 \\) -> \\( x = 4 \\)."
            },
            {
                no: 27,
                text: "Penyelesaian dari \\( 5x + 2 = 3x + 10 \\) adalah...",
                options: ["2", "3", "4", "5"],
                correct: 2,
                desc: "\\( 5x - 3x = 10 - 2 \\) -> \\( 2x = 8 \\) -> \\( x = 4 \\)."
            },

            // --- PtSLV (28-30) ---
            {
                no: 28,
                text: "Manakah tanda ketidaksamaan yang tepat untuk 'Nilai minimal lulus KKM adalah 75'?",
                options: ["\\( x < 75 \\)", "\\( x > 75 \\)", "\\( x \\leq 75 \\)", "\\( x \\geq 75 \\)"],
                correct: 3,
                desc: "Minimal berarti boleh 75 atau lebih. Jadi \\( \\geq \\)."
            },
            {
                no: 29,
                text: "Himpunan penyelesaian dari \\( 3x < 15 \\) untuk x bilangan asli adalah...",
                options: ["{1, 2, 3, 4, 5}", "{1, 2, 3, 4}", "{0, 1, 2, 3, 4}", "{5, 6, 7...}"],
                correct: 1,
                desc: "\\( x < 5 \\). Bilangan asli dimulai dari 1. Jadi {1, 2, 3, 4}."
            },
            {
                no: 30,
                text: "Sebuah bus dapat memuat tidak lebih dari 50 penumpang. Model matematikanya jika p adalah penumpang...",
                options: ["\\( p < 50 \\)", "\\( p > 50 \\)", "\\( p \\leq 50 \\)", "\\( p \\geq 50 \\)"],
                correct: 2,
                desc: "Tidak lebih dari berarti maksimal 50 (50 boleh). Jadi \\( p \\leq 50 \\)."
            },

            // --- EX-MENJODOHKAN & ESSAY (DIJADIKAN PG 31-40) ---
            {
                no: 31,
                text: "Diketahui persamaan \\( -3a + 5 = -4 \\). Nilai a adalah...",
                options: ["-3", "3", "2", "-2"],
                correct: 1,
                desc: "\\( -3a = -4 - 5 \\) -> \\( -3a = -9 \\) -> \\( a = 3 \\)."
            },
            {
                no: 32,
                text: "Jika \\( x + 3 \\geq 10 \\), maka himpunan penyelesaiannya adalah...",
                options: ["\\( x \\geq 7 \\)", "\\( x \\leq 7 \\)", "\\( x > 13 \\)", "\\( x < 13 \\)"],
                correct: 0,
                desc: "\\( x \\geq 10 - 3 \\) -> \\( x \\geq 7 \\)."
            },
            {
                no: 33,
                text: "Bentuk sederhana dari \\( 4x - 2 = 10 \\) ekuivalen dengan...",
                options: ["\\( 4x = 8 \\)", "\\( 4x = 12 \\)", "\\( 2x = 10 \\)", "\\( x = 2 \\)"],
                correct: 1,
                desc: "\\( 4x = 10 + 2 \\) -> \\( 4x = 12 \\)."
            },
            {
                no: 34,
                text: "Sisi miring segitiga siku-siku adalah 10 cm, alasnya 6 cm. Tingginya adalah...",
                options: ["6 cm", "8 cm", "9 cm", "12 cm"],
                correct: 1,
                desc: "\\( t = \\sqrt{10^2 - 6^2} = \\sqrt{100 - 36} = \\sqrt{64} = 8 \\)."
            },
            {
                no: 35,
                text: "Himpunan penyelesaian dari \\( 2x - 3 \\leq 7 \\) adalah...",
                options: ["\\( x \\leq 5 \\)", "\\( x \\leq 2 \\)", "\\( x \\geq 5 \\)", "\\( x \\geq 2 \\)"],
                correct: 0,
                desc: "\\( 2x \\leq 10 \\) -> \\( x \\leq 5 \\)."
            },
            {
                no: 36,
                text: "Sebuah taman berbentuk persegi panjang dengan panjang \\( (2x+3) \\) meter dan lebar 5 meter. Jika kelilingnya 36 meter, nilai x adalah...",
                options: ["2", "3", "4", "5"],
                correct: 1,
                desc: "K = 2(p+l) -> 36 = 2(2x+3+5) -> 18 = 2x+8 -> 10 = 2x -> x=5. (Wait, calc: 18-8=10, x=5). Salah di opsi, mari hitung ulang. 18 = 2x + 8. 2x = 10. x = 5. Opsi D benar."
            },
            {
                no: 37,
                text: "Nilai x jika diketahui keliling segitiga sama sisi adalah 24 cm, dimana sisinya adalah \\( 2x \\) cm.",
                options: ["3", "4", "6", "8"],
                correct: 1,
                desc: "Keliling = 3 x sisi. 24 = 3(2x). 24 = 6x. x = 4."
            },
            {
                no: 38,
                text: "Jumlah tiga bilangan genap berurutan adalah 48. Bilangan terbesarnya adalah...",
                options: ["14", "16", "18", "20"],
                correct: 2,
                desc: "Misal: \\( x, x+2, x+4 \\). \\( 3x + 6 = 48 \\) -> \\( 3x = 42 \\) -> \\( x = 14 \\). Bilangan: 14, 16, 18."
            },
            {
                no: 39,
                text: "Pak Budi memanen mangga. Hasil panennya \\( p \\) kg, tidak kurang dari 100 kg. Modelnya...",
                options: ["\\( p < 100 \\)", "\\( p \\leq 100 \\)", "\\( p > 100 \\)", "\\( p \\geq 100 \\)"],
                correct: 3,
                desc: "Tidak kurang dari = minimal = lebih besar atau sama dengan (\\( \\geq \\))."
            },
            {
                no: 40,
                text: "Lebar persegi panjang \\( x \\) cm dan panjangnya \\( x+5 \\) cm. Jika kelilingnya tidak lebih dari 50 cm, maka...",
                options: ["\\( 4x + 10 \\leq 50 \\)", "\\( 2x + 5 \\leq 50 \\)", "\\( 4x + 10 \\geq 50 \\)", "\\( 2x + 5 \\geq 50 \\)"],
                correct: 0,
                desc: "K = 2(p+l) = 2(x+5+x) = 2(2x+5) = 4x+10. Syarat \\( K \\leq 50 \\) -> \\( 4x+10 \\leq 50 \\)."
            }
        ];

        let userAnswers = new Array(questions.length).fill(null);
        let quizStarted = false;

        function startQuiz() {
            quizStarted = true;
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('submit-bar').classList.remove('hidden');
            renderQuestions();
            // Render Math equations
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\(", right: "\\)", display: false}
                ]
            });
            window.scrollTo(0, 0);
        }

        function renderQuestions() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = questions.map((q, index) => `
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500 relative" id="q-${index}">
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-orange-100 text-orange-800 text-xs font-bold px-3 py-1 rounded-full">Soal No. ${q.no}</span>
                    </div>
                    <p class="text-lg font-medium mb-6 text-gray-800 leading-relaxed math-tex">${q.text}</p>
                    <div class="space-y-3">
                        ${q.options.map((opt, optIndex) => `
                            <div class="relative">
                                <input type="radio" name="q${index}" id="opt-${index}-${optIndex}" value="${optIndex}" class="hidden option-input" onchange="selectAnswer(${index}, ${optIndex})">
                                <label for="opt-${index}-${optIndex}" class="option-label block w-full p-4 border border-gray-200 rounded-lg hover:bg-orange-50 text-left text-gray-700 select-none flex items-center">
                                    <div class="w-6 h-6 border-2 border-gray-300 rounded-full mr-3 flex items-center justify-center text-xs font-bold dot-indicator text-transparent">‚úì</div>
                                    <span class="math-tex">${opt}</span>
                                </label>
                            </div>
                        `).join('')}
                    </div>
                    <!-- Feedback Section -->
                    <div id="feedback-${index}" class="hidden mt-6 pt-4 border-t border-gray-100">
                        <div class="p-4 rounded-lg bg-orange-50 border border-orange-200">
                            <p class="font-bold text-gray-900 mb-1">Pembahasan:</p>
                            <p class="text-gray-700 text-sm math-tex">${q.desc}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function selectAnswer(qIndex, optIndex) {
            if (!quizStarted) return;
            userAnswers[qIndex] = optIndex;
        }

        function submitQuiz() {
            const unanswered = userAnswers.filter(a => a === null).length;
            if (unanswered > 0) {
                if (!confirm(`Kamu belum menjawab ${unanswered} soal. Yakin?`)) return;
            } else {
                if (!confirm("Kirim jawaban sekarang?")) return;
            }
            calculateResults();
        }

        function calculateResults() {
            let score = 0;
            let correctCount = 0;

            questions.forEach((q, index) => {
                const feedbackDiv = document.getElementById(`feedback-${index}`);
                const inputs = document.getElementsByName(`q${index}`);
                const labels = document.querySelectorAll(`label[for^="opt-${index}-"]`);
                
                inputs.forEach(input => input.disabled = true);
                feedbackDiv.classList.remove('hidden');

                const userAns = userAnswers[index];
                
                labels.forEach((label, optIndex) => {
                    label.classList.remove('hover:bg-orange-50');
                    if (optIndex === q.correct) {
                        label.classList.add('correct-answer');
                    }
                    if (userAns !== null && userAns !== q.correct && userAns === optIndex) {
                        label.classList.add('wrong-answer');
                    }
                });

                if (userAns === q.correct) {
                    score++;
                    correctCount++;
                }
            });

            const finalScore = (score / questions.length) * 100;
            document.getElementById('score-display').innerText = finalScore.toFixed(0);
            document.getElementById('correct-count').innerText = correctCount;
            document.getElementById('wrong-count').innerText = questions.length - correctCount;

            document.getElementById('quiz-container').classList.add('pointer-events-none');
            document.getElementById('submit-bar').classList.add('hidden');
            document.getElementById('result-container').classList.remove('hidden');
            
            // Re-render math in feedback
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\(", right: "\\)", display: false}
                ]
            });

            window.scrollTo({ top: 0, behavior: 'smooth' });
            setTimeout(() => {
                document.getElementById('quiz-container').classList.remove('pointer-events-none');
            }, 1000);
        }
    </script>
</body>
</html>

